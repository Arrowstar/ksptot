function [gradf,gradg] = gbeamGVa( x, active )%gbeamGVa - Gradients for Gary Vanderplaats cantilever beam %           with n design variables%           from Vanderplaats (1984) Example 5-1, pp. 147-150.% gradg = sparse matrix with only columns of active constraint gradients.% Simulate constraint deletion by updating only active constraints.[gradf,GRADG] = gbeamGV( x );if nargin > 1   if isempty(active)      gradg = 0;   else      nac = length(active);      [n,m]=size(GRADG);      if nac<m         i = repmat((1:n)',1,nac);         j = repmat(active(:)',n,1);         gradg = sparse(i,j,GRADG(:,active),n,m);      else         gradg = GRADG;      end   endelse   gradg = GRADG;endend